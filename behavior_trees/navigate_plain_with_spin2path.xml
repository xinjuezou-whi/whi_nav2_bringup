<root main_tree_to_execute="MainTree">
	<BehaviorTree ID="MainTree">
		<Sequence name="NavigateWithSpinInit">
			<!-- Step 1: Compute a path once -->
			<ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>

			<!-- Step 2: Align with that path (atomic with RecoveryNode) -->
			<SpinToPath path="{path}" lookahead_distance="0.3" action_id="SpinToPath"/>

			<!-- Step 3: Start continuous replanning + execution -->
			<PipelineSequence name="NavigateWithReplanning">
				<RateController hz="1.0">
					<ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
				</RateController>

				<FollowPath path="{path}" controller_id="FollowPath"/>
			</PipelineSequence>
		</Sequence>
	</BehaviorTree>
</root>
